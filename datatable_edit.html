<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />

<title>DataTables Edit Bootstrap 3</title>
<!-- <style>
.btn-danger-text {
	color: #bd362f;
}

.btn-danger-text:hover, .btn-danger-text:active, .btn-danger-text.active,
	.btn-danger-text.disabled, .btn-danger-text[disabled] {
	color: #bd362f;
	*color: #a9302a;
}

.btn-danger-text:active, .btn-danger-text.active {
	color: #942a25 \9;
}
</style> -->
<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
<link rel="stylesheet" type="text/css" href="css/dataTables.bootstrap.css">

<style>
#dialog {
	top: 15%;
}
</style>

<script type="text/javascript" src="js/jquery-1.10.2.min.js"></script>
<script type="text/javascript" src="js/bootstrap.min.js"></script>
<script type="text/javascript" src="js/jquery.dataTables.min.js"></script>
<script type="text/javascript" src="js/dataTables.bootstrap.js"></script>
<script type="text/javascript" src="js/jquery.validate.min.js"></script>

<script type="text/javascript" charset="utf-8">
	$(document).ready(function() {
		
		$('#datatable').dataTable( {
			serverSide: true,
		    ajax: 'paging.php',
		    "ordering": false,
		    "lengthChange": false,
	        "scrollY": "400px",
	        "scrollCollapse": false,
		    language: {
		        search: "Ricerca:",
		        paginate: {
		            first:      "Primo",
		            previous:   "<<",
		            next:       ">>",
		            last:       "Ultimo"
		        },
		    },
		    "drawCallback": function( settings ) {
		    	$('#datatable tbody tr').on('click', function(event) {
				    $(this).toggleClass('active').siblings().removeClass('active');
				});
		    }
		} );	
		
		$.validator.setDefaults({
			errorElement: "span",
		    errorClass: "has-error help-block",
		    highlight: function (element, errorClass, validClass) {
		        $(element).closest('.form-group').removeClass('has-success').addClass('has-error');
		    },
		    unhighlight: function (element, errorClass, validClass) {
		    	$(element).closest('.form-group').removeClass('has-error');
		    },
		    errorPlacement: function (error, element) {
	 	       error.insertAfter(element.parent());
		    }
		});
		
		
		var $validator = $('#form-modal').validate({
		    rules: {
		    	tipologia: "required",
		    	insegna: "required",
		    	indirizzo: "required",
		    	camere: {
		    		required:true,
		    		number: true
		    	},
		    	posti: {
		    		required:true,
		    		number: true
		    	}   	
		 	}
		});

		$("#dialog").on('show.bs.modal', function (e) {
			// trovare metodo elegante per riempire il form
			var id = $('#datatable tbody tr.active').children('td:eq(0)').text();  
			$("#id").val(id);
		})
		
		$('#reset').on('click', function(event) {
			  // reset form, validator, remove error class
			  $validator.resetForm();
			  $(".has-error").removeClass("has-error");
		});
		
	} );
</script>
</head>
<body>
	<br />
	<div class="container">
		<div class="modal" id="dialog" tabindex="-1" role="dialog" aria-hidden="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal">
							<span aria-hidden="true">&times;</span><span class="sr-only">Close</span>
						</button>
						<h4 class="modal-title" id="title">Albergo</h4>
					</div>
					<div class="modal-body">
						<form class="form-horizontal" id="form-modal">
							<div class="form-group">
								<label class="col-sm-4 control-label" for="id">Id</label>
								<div class="col-md-2">
									<input name="id" id="id" type=text class="form-control uneditable-input">
								</div>
							</div>
							<div class="form-group">
								<label class="col-sm-4 control-label" for="tipologia">Tipologia</label>
								<div class="col-md-4">
									<input name="tipologia" id="tipologia" type=text class="form-control">
								</div>
							</div>
							<div class="form-group">
								<label class="col-sm-4 control-label" for="insegna">Insegna</label>
								<div class="col-md-4">
									<input name="insegna" id="insegna" type="text" class="form-control">
								</div>
							</div>
							<div class="form-group">
								<label class="col-sm-4 control-label" for="indirizzo">Indirizzo</label>
								<div class="col-md-4">
									<input name="indirizzo" id="indirizzo" type="text" class="form-control">
								</div>
							</div>
							<div class="form-group">
								<label class="col-sm-4 control-label" for="camere">Numero Camere</label>
								<div class="col-md-4">
									<input name="camere" id="camere" type="text" class="form-control">
								</div>
							</div>
							<div class="form-group">
								<label class="col-sm-4 control-label" for="posti" >Numero Posti letto</label>
								<div class="col-md-4">
									<input name="posti" id="posti" type="text" class="form-control">
								</div>
							</div>
							<div class="modal-footer">
								<button id="reset" type="reset" class="btn btn-default" data-dismiss="modal">Close</button>
								<button type="submit" class="btn btn-primary">Save changes</button>
							</div>
						</form>
					</div>

				</div>
			</div>
		</div>
		<br />
		<div class="row" style="position: absolute;">
			<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#dialog">New</button>
			<button type="button" class="btn btn-success">Edit</button>
			<button type="button" class="btn btn-danger">Delete</button>
		</div>
		<div class="row">
			<table class="table table-hover table-striped table-bordered" id="datatable">
				<thead>
					<tr>
						<th class="col-md-1">Id</th>
						<th class="col-md-1">Tipologia</th>
						<th class="col-md-4">Insegna</th>
						<th class="col-md-4">Indirizzo</th>
						<th class="col-md-1">Camere</th>
						<th class="col-md-1">Posti</th>
					</tr>
				</thead>
				<tbody>

				</tbody>
			</table>
		</div>
	</div>
</body>
</html>